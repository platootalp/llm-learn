# åŒ…ç®¡ç†å·¥å…·
## 1.Pythonä¸Javaçš„å·®å¼‚

> Python ä¸ºä»€ä¹ˆä¸åƒ Java çš„ Maven é‚£æ ·æœ‰ä¸€ä¸ªå…¨å±€åŒ…ä»“åº“ + åæ ‡å¼•ç”¨æœºåˆ¶ï¼Œè€Œæ˜¯éœ€è¦åœ¨æ¯ä¸ªé¡¹ç›®ä¸­åå¤ä¸‹è½½ä¾èµ–ï¼Ÿ

è¿™å…³ç³»åˆ° **è¯­è¨€ç”Ÿæ€è®¾è®¡å“²å­¦** å’Œ **å¼€å‘æ¨¡å‹å·®å¼‚**ï¼Œæˆ‘ä»¬ä»å‡ ä¸ªç»´åº¦æ¥è§£æ„ï¼š

---

### ğŸ’¡ æ ¸å¿ƒå¯¹æ¯”ï¼šPython vs Java çš„åŒ…ç®¡ç†ç†å¿µ

| ç‰¹æ€§                 | Javaï¼ˆMavenï¼‰                                   | Pythonï¼ˆpip/uvï¼‰                            |
|----------------------|--------------------------------------------------|----------------------------------------------|
| åŒ…å£°æ˜æ–¹å¼           | `groupId:artifactId:version` æ˜ç¡®åæ ‡           | åŒ…å + versionï¼Œä¾èµ–éšå¼é€’å½’è§£æ             |
| æœ¬åœ°ç¼“å­˜ä»“åº“         | `.m2/repository` å…¨å±€ç¼“å­˜ï¼Œç»“æ„æ¸…æ™°              | `~/.cache/pip`ï¼ˆæˆ– uv ç¼“å­˜ï¼‰ï¼Œä¸æš´éœ²ç»“æ„       |
| ä¾èµ–ä½¿ç”¨æ–¹å¼         | åªå£°æ˜åæ ‡ï¼ŒMaven è‡ªåŠ¨å¼•å…¥ä¾èµ–                   | å®‰è£…åä¾èµ–æ”¾å…¥è™šæ‹Ÿç¯å¢ƒä¸­ï¼Œä¸èƒ½ç”¨â€œåæ ‡å¼•ç”¨â€    |
| å¤šé¡¹ç›®å…±äº«ä¾èµ–       | æ”¯æŒï¼ˆå…±äº« `.m2` ä»“åº“ï¼‰                          | é€šå¸¸æ¯ä¸ªé¡¹ç›®ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œä¸å…±äº«ä¾èµ–          |
| é¡¹ç›®æ„å»ºä¸ç”Ÿå‘½å‘¨æœŸ   | Maven æ˜¯å®Œæ•´æ„å»ºç³»ç»Ÿï¼ˆcompile/test/packageï¼‰     | Python æ²¡æœ‰ç»Ÿä¸€çš„æ„å»ºç³»ç»Ÿï¼ˆå·¥å…·ç™¾èŠ±é½æ”¾ï¼‰     |
| æ’ä»¶æœºåˆ¶             | Maven æ’ä»¶ç³»ç»Ÿéå¸¸å¼ºå¤§                           | Python çš„æ„å»ºå·¥å…·å¦‚ `setuptools`, `hatch` åˆ†æ•£ |

---

### ğŸ¤” Python ä¸ºä»€ä¹ˆæ²¡æœ‰ Maven çš„â€œåæ ‡å¼•ç”¨æœºåˆ¶â€ï¼Ÿ

1. #### ğŸ§ª Python æ˜¯åŠ¨æ€è¯­è¨€ï¼Œä¸éœ€è¦ç¼–è¯‘åæ ‡
   Java éœ€è¦ç¼–è¯‘æ—¶è§£æä¾èµ–ï¼Œå¿…é¡»åœ¨ç¼–è¯‘å‰å°±æ‰¾åˆ°æ‰€æœ‰ `.jar`ï¼Œæ‰€ä»¥ Maven çš„â€œåæ ‡ç³»ç»Ÿâ€å¾ˆé‡è¦ï¼›  
   Python æ˜¯è§£é‡Šæ‰§è¡Œï¼Œåªéœ€è¦åœ¨è¿è¡Œç¯å¢ƒä¸­å­˜åœ¨å³å¯ï¼Œæ²¡å¿…è¦åƒ Java é‚£æ ·å®šä¹‰å®Œæ•´çš„ artifact åæ ‡ã€‚

2. #### ğŸ—‚ï¸ Python ç¤¾åŒºé¼“åŠ±æ¯ä¸ªé¡¹ç›®è‡ªå¸¦ç¯å¢ƒï¼ˆvenvï¼‰
   ä¸ºäº†é¿å…ä¾èµ–å†²çªï¼ˆå°¤å…¶æ˜¯ä¸åŒé¡¹ç›®ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„åº“ï¼‰ï¼ŒPython é¼“åŠ±æ¯ä¸ªé¡¹ç›®ä½¿ç”¨ç‹¬ç«‹çš„è™šæ‹Ÿç¯å¢ƒï¼›  
   è€Œ Maven è®¾è®¡ä¹‹åˆæ˜¯ä¸ºäº†**åœ¨ CI/CD æˆ–å¤šæ¨¡å—é¡¹ç›®ä¸­é‡ç”¨ä¾èµ–å’Œæ’ä»¶**ï¼Œä¸¤è€…å…³æ³¨ç‚¹ä¸åŒã€‚

3. #### ğŸ§± Python å·¥å…·é“¾åˆ†æ•£ï¼ˆä½†æ­£åœ¨æ”¶æ•›ï¼‰
   Python ä¸€ç›´ç¼ºå°‘ç±»ä¼¼ Maven çš„ç»Ÿä¸€æ„å»º + ä¾èµ–ç®¡ç†ç³»ç»Ÿï¼ˆè™½ç„¶ç°åœ¨çš„ `poetry`ã€`uv`ã€`hatch` åœ¨æ”¶æ•›ï¼‰ï¼Œ  
   è¿‡å»æ˜¯ `setup.py`ã€`requirements.txt`ã€`Pipfile`ã€`pyproject.toml` å„è‡ªä¸ºæˆ˜ï¼Œç”Ÿæ€å‰²è£‚ä¸¥é‡ã€‚

4. #### ğŸŒ pip çš„æœ¬åœ°ç¼“å­˜æœºåˆ¶æ›´â€œéšå¼â€
   `pip` ä¼šç¼“å­˜ä¸‹è½½å¥½çš„ `.whl` åŒ…ï¼Œä½†ä¸ä»¥â€œåæ ‡ä»“åº“â€çš„å½¢å¼æš´éœ²ï¼›å¼€å‘è€…é€šå¸¸ä¸æ‰‹åŠ¨æ“ä½œç¼“å­˜ç›®å½•ã€‚

---

### ğŸ§° ç°åœ¨ Python ç”Ÿæ€æœ‰æ²¡æœ‰ç±»ä¼¼ Maven çš„æ–¹æ¡ˆï¼Ÿ

å…¶å®è¶Šæ¥è¶Šå¤šäº†ï¼Œæ¨èä¸¤ä¸ªæ–¹å‘ï¼š

#### 1. **Poetry**ï¼šæœ€åƒ Maven çš„åŒ…ç®¡ç†å·¥å…·

```toml
# pyproject.toml
[tool.poetry.dependencies]
requests = "^2.31.0"
pandas = "^2.2.1"
```

å®ƒæ”¯æŒï¼š

- `lock` æ–‡ä»¶ï¼ˆç±»ä¼¼ `pom.xml` + `mvn dependency:tree`ï¼‰
- è‡ªåŠ¨æ„å»ºã€æ‰“åŒ…ã€å‘å¸ƒ PyPI åŒ…
- è™šæ‹Ÿç¯å¢ƒè‡ªåŠ¨ç®¡ç†
- æ”¯æŒå¤šæ¨¡å—é¡¹ç›®

#### 2. **uv + pyproject.toml**

`uv` æ”¯æŒç°ä»£ Python åŒ…ç®¡ç†æ–¹å¼ï¼Œç»“åˆ `pyproject.toml` å¯ä»¥å®ç°æ„å»ºã€ä¾èµ–ç®¡ç†ä¸€ä½“åŒ–ã€‚

---

### ğŸš€ æœªæ¥è¶‹åŠ¿ï¼šPython ç¤¾åŒºæ­£èµ°å‘ç±»ä¼¼ Maven çš„æ¨¡å‹

- `PEP 621` ç»Ÿä¸€äº†å…ƒæ•°æ®è§„èŒƒï¼ˆç±»ä¼¼ Maven çš„åæ ‡ï¼‰
- `pyproject.toml` æ­£åœ¨æˆä¸º Python çš„â€œå•ä¸€å…¥å£â€
- å·¥å…·å¦‚ `uv`, `hatch`, `poetry`, `pdm` éƒ½å¼€å§‹ç»Ÿä¸€æ„å»º + ä¾èµ–é€»è¾‘

---

#### âœ… æ€»ç»“ä¸€ä¸‹

> Python æ²¡æœ‰ Java Maven é‚£ç§â€œåæ ‡+å…¨å±€ä»“åº“â€çš„æ˜¾å¼æ¨¡å‹ï¼Œæ˜¯å› ä¸ºè¯­è¨€åŠ¨æ€ç‰¹æ€§ + ä¾èµ–éš”ç¦»å“²å­¦ä¸åŒã€‚ä½†éšç€æ„å»ºæ ‡å‡†åŒ–æ¨è¿›ï¼ˆpyproject.tomlï¼‰ï¼Œæœªæ¥ Python çš„åŒ…ç®¡ç†ä½“éªŒä¼šè¶Šæ¥è¶Šæ¥è¿‘ Maven æ¨¡å‹ã€‚

---



## 2.æ„å»ºæ¨¡æ¿

å¥½çš„ï¼Œé‚£æˆ‘å°±ä»¥ Python æ¨¡æ‹Ÿä¸€ä¸ªç±»ä¼¼ Java ä¸­å¤šæ¨¡å— Maven é¡¹ç›®çš„ç»“æ„ï¼Œä½¿ç”¨ **`pyproject.toml` + poetry` ä½œä¸ºæ ¸å¿ƒæ„å»ºå·¥å…·**ï¼Œå®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š

- å¤šæ¨¡å—æ‹†åˆ†ï¼ˆä¾‹å¦‚ï¼š`core`ã€`service`ã€`cli`ï¼‰
- æ˜ç¡®ä¾èµ–å¼•ç”¨ï¼ˆæ¨¡å—é—´ä¾èµ–ï¼‰
- æœ¬åœ°å¼€å‘ + æ„å»º + å®‰è£… + å‘å¸ƒ
- ç»Ÿä¸€ç®¡ç†ä¾èµ–ç‰ˆæœ¬ï¼ˆå¦‚ Java Maven ä¸­çš„ä¾èµ–ç»§æ‰¿ï¼‰

------

### ğŸ¯ ç¤ºä¾‹é¡¹ç›®ç»“æ„ï¼ˆå‡è®¾é¡¹ç›®åä¸º `pyapp`ï¼‰

```text
pyapp/
â”œâ”€â”€ pyproject.toml         # æ ¹é…ç½®æ–‡ä»¶ï¼Œç»Ÿä¸€ç®¡ç†ç‰ˆæœ¬å’Œä¾èµ–
â”œâ”€â”€ poetry.lock            # é”æ–‡ä»¶
â”œâ”€â”€ README.md
â”œâ”€â”€ core/
â”‚   â””â”€â”€ pyproject.toml     # core æ¨¡å—ï¼šæä¾›åŸºç¡€æ¨¡å‹å’Œå·¥å…·ç±»
â”‚   â””â”€â”€ core/
â”‚       â””â”€â”€ __init__.py
â”‚       â””â”€â”€ utils.py
â”œâ”€â”€ service/
â”‚   â””â”€â”€ pyproject.toml     # service æ¨¡å—ï¼šä¾èµ– coreï¼Œæä¾›ä¸šåŠ¡é€»è¾‘
â”‚   â””â”€â”€ service/
â”‚       â””â”€â”€ __init__.py
â”‚       â””â”€â”€ calculator.py
â”œâ”€â”€ cli/
â”‚   â””â”€â”€ pyproject.toml     # cli æ¨¡å—ï¼šå‘½ä»¤è¡Œç•Œé¢ï¼Œä¾èµ– service
â”‚   â””â”€â”€ cli/
â”‚       â””â”€â”€ __init__.py
â”‚       â””â”€â”€ main.py
```

------

### ğŸ› ï¸ é…ç½®è¯¦è§£

#### 1. æ ¹ç›®å½• `pyproject.toml`ï¼ˆå¯é€‰ï¼‰

ä½ å¯ä»¥é€‰æ‹©åªä½¿ç”¨å­æ¨¡å— `pyproject.toml`ï¼Œæˆ–è€…ä½¿ç”¨ [poetry workspace](https://python-poetry.org/docs/workspaces/) æ¥ç»Ÿä¸€ç®¡ç†æ‰€æœ‰æ¨¡å—ï¼š

```toml
[tool.poetry]
name = "pyapp"
version = "0.1.0"
description = "Multi-module Python app like Maven"
authors = ["You <you@example.com>"]

[tool.poetry.dependencies]
python = "^3.10"

[tool.poetry.group.dev.dependencies]
black = "^24.2"
pytest = "^8.0"

[tool.poetry.workspace]
members = ["core", "service", "cli"]
```

------

#### 2. `core/pyproject.toml`

```toml
[tool.poetry]
name = "pyapp-core"
version = "0.1.0"
description = "Core utilities and models"
authors = ["You <you@example.com>"]
packages = [{ include = "core" }]

[tool.poetry.dependencies]
python = "^3.10"
```

------

#### 3. `service/pyproject.toml`

```toml
[tool.poetry]
name = "pyapp-service"
version = "0.1.0"
description = "Business logic layer"
authors = ["You <you@example.com>"]
packages = [{ include = "service" }]

[tool.poetry.dependencies]
python = "^3.10"
pyapp-core = { path = "../core" }
```

------

#### 4. `cli/pyproject.toml`

```toml
[tool.poetry]
name = "pyapp-cli"
version = "0.1.0"
description = "CLI entrypoint"
authors = ["You <you@example.com>"]
packages = [{ include = "cli" }]

[tool.poetry.dependencies]
python = "^3.10"
pyapp-service = { path = "../service" }

[tool.poetry.scripts]
pyapp = "cli.main:run"
```

------

### ğŸš€ æ„å»º & ä½¿ç”¨æ–¹å¼

1. #### **è¿›å…¥æ¯ä¸ªæ¨¡å—æ‰§è¡Œå®‰è£…**ï¼š

```bash
cd core
poetry install

cd ../service
poetry install

cd ../cli
poetry install
```

æˆ–è€…åœ¨æ ¹ç›®å½•ä½¿ç”¨ Workspaceï¼š

```bash
poetry install
```

1. #### **ä½¿ç”¨ CLI å‘½ä»¤è¿è¡Œç¨‹åº**ï¼š

```bash
poetry run pyapp
```

------

### âœ… é€‚åˆå“ªç§æƒ…å†µï¼Ÿ

- å¤šä¸ªä¸šåŠ¡æ¨¡å—æ‹†åˆ†å¼€å‘
- æ¯ä¸ªæ¨¡å—èƒ½ç‹¬ç«‹æµ‹è¯•ã€æ„å»ºã€å‘å¸ƒ
- ç±»ä¼¼ Java å¾®æœåŠ¡æˆ–æ’ä»¶å¼æ¶æ„çš„å¼€å‘æ–¹å¼

------

### âœ… å¯é€‰è¿›é˜¶ï¼š

- æŠŠæ¨¡å—å‘å¸ƒåˆ°ç§æœ‰ PyPIï¼ˆå¦‚ Nexusï¼‰å¹¶ç”¨ version ç®¡ç†
- é…ç½® GitHub Actions è¿›è¡Œ CI æ„å»ºå’Œè‡ªåŠ¨å‘å¸ƒ
- åˆ©ç”¨ `uv` åŠ é€Ÿä¾èµ–å®‰è£…ã€å…¼å®¹ Poetry çš„ lock æ–‡ä»¶

------

